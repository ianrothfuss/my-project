"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3602],{53602:(e,l,a)=>{a.r(l),a.d(l,{RelationshipComponent:()=>v});var t=a(90230),o=a(27162),n=a(93495),s=a(12298),c=a(79870),i=a(37415),r=a(30207),u=a(18019),d=a(46771),p=a(65165),h=a(3391),b="lexical-relationship",m={depth:0},v=e=>{var l,a,v;let{data:{relationTo:_,value:g},nodeKey:f}=e;if("object"==typeof g)throw Error("Relationship value should be a string or number. The Lexical Relationship component should not receive the populated value object.");let x=(0,h.useRef)(null),[j]=(0,s.DF)(),w=(0,c.a)(),{config:{routes:{api:N},serverURL:C},getEntityConfig:R}=(0,r.b)(),[k]=(0,h.useState)(()=>R({collectionSlug:_})),{i18n:D,t:y}=(0,u.d)(),[S,B]=(0,h.useReducer)(e=>e+1,0),[{data:E},{setParams:P}]=(0,d.usePayloadAPI)("".concat(C).concat(N,"/").concat(k.slug,"/").concat(g),{initialParams:m}),{closeDocumentDrawer:T,DocumentDrawer:A,DocumentDrawerToggler:K}=(0,o.a)({id:g,collectionSlug:k.slug}),L=(0,h.useCallback)(()=>{j.update(()=>{var e;null==(e=(0,p.nsf)(f))||e.remove()})},[j,f]),F=h.useCallback(()=>{P({...m,cacheBust:S}),T(),B()},[S,P,T]);return(0,n.jsxs)("div",{className:b,contentEditable:!1,ref:x,children:[(0,n.jsxs)("div",{className:"".concat(b,"__wrap"),children:[(0,n.jsx)("p",{className:"".concat(b,"__label"),children:y("fields:labelRelationship",{label:(null==(l=k.labels)?void 0:l.singular)?(0,i.s)(null==(a=k.labels)?void 0:a.singular,D):k.slug})}),(0,n.jsx)(K,{className:"".concat(b,"__doc-drawer-toggler"),children:(0,n.jsx)("p",{className:"".concat(b,"__title"),children:E?E[(null==k||null==(v=k.admin)?void 0:v.useAsTitle)||"id"]:g})})]}),w&&(0,n.jsxs)("div",{className:"".concat(b,"__actions"),children:[(0,n.jsx)(d.Button,{buttonStyle:"icon-label",className:"".concat(b,"__swapButton"),disabled:!w,el:"button",icon:"swap",onClick:()=>{f&&j.dispatchCommand(t.a,{replace:{nodeKey:f}})},round:!0,tooltip:y("fields:swapRelationship")}),(0,n.jsx)(d.Button,{buttonStyle:"icon-label",className:"".concat(b,"__removeButton"),disabled:!w,icon:"x",onClick:e=>{e.preventDefault(),L()},round:!0,tooltip:y("fields:removeRelationship")})]}),!!g&&(0,n.jsx)(A,{onSave:F})]})}}}]);