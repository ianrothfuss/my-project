(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6266],{14632:(e,r,t)=>{"use strict";t.d(r,{cn:()=>o});var s=t(27183),a=t(33886);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},15827:(e,r,t)=>{"use strict";t.d(r,{j:()=>o});var s=t(93495),a=t(27183);let o=e=>{let{message:r,as:t,className:o}=e;return r?(0,s.jsx)(t||"p",{className:(0,a.A)("text-error text-sm",o),children:r}):null}},23380:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Price:()=>n});var s=t(93495),a=t(45089),o=t(3391);let n=e=>{let{amount:r,className:t,highestAmount:n,lowestAmount:i,currencyCode:l,as:c="p"}=e,{formatCurrency:d,supportedCurrencies:u}=(0,a.H2)(),p=(0,o.useMemo)(()=>{if(l)return u.find(e=>e.code===l)},[l,u]);return"number"==typeof r?(0,s.jsx)(c,{className:t,suppressHydrationWarning:!0,children:d(r,{currency:p})}):n&&n!==i?(0,s.jsx)(c,{className:t,suppressHydrationWarning:!0,children:"".concat(d(i,{currency:p})," - ").concat(d(n,{currency:p}))}):i?(0,s.jsx)(c,{className:t,suppressHydrationWarning:!0,children:"".concat(d(i,{currency:p}))}):null}},39822:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var s=t(93495);t(3391);var a=t(14632);function o(e){let{className:r,type:t,...o}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("border-input bg-background file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...o})}},45169:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,42919,23)),Promise.resolve().then(t.bind(t,94861)),Promise.resolve().then(t.bind(t,23380))},59046:(e,r,t)=>{"use strict";t.d(r,{$:()=>l});var s=t(93495);t(3391);var a=t(55586),o=t(14743),n=t(14632);let i=(0,o.F)("relative inline-flex items-center justify-center hover:cursor-pointer gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90 ",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-card shadow-xs hover:bg-accent hover:bg-primary-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"text-primary/50 hover:text-primary/100 [&.active]:text-primary/100 py-2 px-4 uppercase font-mono tracking-[0.1em] text-xs",link:"text-primary underline-offset-4 hover:underline",nav:"text-primary/50 hover:text-primary/100 [&.active]:text-primary/100 p-0 pt-2 pb-6 uppercase font-mono tracking-[0.1em] text-xs"},size:{clear:"",default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:r,variant:t,size:o,asChild:l=!1,...c}=e,d=l?a.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,n.cn)(i({variant:t,size:o,className:r})),...c})}},63044:(e,r,t)=>{"use strict";t.d(r,{A:()=>i,AuthProvider:()=>n});var s=t(93495),a=t(3391);let o=(0,a.createContext)({}),n=e=>{let{children:r}=e,[t,n]=(0,a.useState)(),[i,l]=(0,a.useState)(),c=(0,a.useCallback)(async e=>{try{let t=await fetch("".concat("http://localhost:3000","/api/users/create"),{body:JSON.stringify({email:e.email,password:e.password,passwordConfirm:e.passwordConfirm}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(t.ok){var r;let{data:e,errors:s}=await t.json();if(s)throw Error(s[0].message);n(null==e||null==(r=e.loginUser)?void 0:r.user),l("loggedIn")}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),d=(0,a.useCallback)(async e=>{try{let r=await fetch("".concat("http://localhost:3000","/api/users/login"),{body:JSON.stringify({email:e.email,password:e.password}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(r.ok){let{errors:e,user:t}=await r.json();if(e)throw Error(e[0].message);return n(t),l("loggedIn"),t}throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),u=(0,a.useCallback)(async()=>{try{if((await fetch("".concat("http://localhost:3000","/api/users/logout"),{credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"})).ok)n(null),l("loggedOut");else throw Error("An error occurred while attempting to logout.")}catch(e){throw Error("An error occurred while attempting to logout.")}},[]);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("http://localhost:3000","/api/users/me"),{credentials:"include",headers:{"Content-Type":"application/json"},method:"GET"});if(e.ok){let{user:r}=await e.json();n(r||null),l(r?"loggedIn":void 0)}else throw Error("An error occurred while fetching your account.")}catch(e){throw n(null),Error("An error occurred while fetching your account.")}})()},[]);let p=(0,a.useCallback)(async e=>{try{let t=await fetch("".concat("http://localhost:3000","/api/users/forgot-password"),{body:JSON.stringify({email:e.email}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(t.ok){var r;let{data:e,errors:s}=await t.json();if(s)throw Error(s[0].message);n(null==e||null==(r=e.loginUser)?void 0:r.user)}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),m=(0,a.useCallback)(async e=>{try{let s=await fetch("".concat("http://localhost:3000","/api/users/reset-password"),{body:JSON.stringify({password:e.password,passwordConfirm:e.passwordConfirm,token:e.token}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(s.ok){var r,t;let{data:e,errors:a}=await s.json();if(a)throw Error(a[0].message);n(null==e||null==(r=e.loginUser)?void 0:r.user),l((null==e||null==(t=e.loginUser)?void 0:t.user)?"loggedIn":void 0)}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]);return(0,s.jsx)(o.Provider,{value:{create:c,forgotPassword:p,login:d,logout:u,resetPassword:m,setUser:n,status:i,user:t},children:r})},i=()=>(0,a.useContext)(o)},66068:(e,r,t)=>{"use strict";t.d(r,{J:()=>n});var s=t(93495);t(3391);var a=t(84034),o=t(14632);function n(e){let{className:r,...t}=e;return(0,s.jsx)(a.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm text-primary/50 font-mono leading-none select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}},86906:(e,r,t)=>{"use strict";t.d(r,{e:()=>o});var s=t(93495),a=t(14632);let o=e=>{let{className:r,children:t}=e;return(0,s.jsx)("div",{className:(0,a.cn)("flex flex-col gap-2",r),children:t})}},94861:(e,r,t)=>{"use strict";t.d(r,{AccountForm:()=>h});var s=t(93495),a=t(15827),o=t(86906),n=t(59046),i=t(39822),l=t(66068),c=t(63044),d=t(49464),u=t(3391),p=t(54299),m=t(58373);let h=()=>{let{setUser:e,user:r}=(0,c.A)(),[t,h]=(0,u.useState)(!1),{formState:{errors:g,isLoading:f,isSubmitting:v,isDirty:w},handleSubmit:x,register:y,reset:b,watch:j}=(0,p.mN)(),C=(0,u.useRef)({});C.current=j("password","");let k=(0,d.useRouter)(),N=(0,u.useCallback)(async t=>{if(r){let s=await fetch("".concat("http://localhost:3000","/api/users/").concat(r.id),{body:JSON.stringify(t),credentials:"include",headers:{"Content-Type":"application/json"},method:"PATCH"});if(s.ok){let r=await s.json();e(r.doc),m.oR.success("Successfully updated account."),h(!1),b({name:r.doc.name,email:r.doc.email,password:"",passwordConfirm:""})}else m.oR.error("There was a problem updating your account.")}},[r,e,b]);return(0,u.useEffect)(()=>{null===r&&k.push("/login?error=".concat(encodeURIComponent("You must be logged in to view this page."),"&redirect=").concat(encodeURIComponent("/account"))),r&&b({name:r.name,email:r.email,password:"",passwordConfirm:""})},[r,k,b,t]),(0,s.jsxs)("form",{className:"max-w-xl",onSubmit:x(N),children:[t?(0,s.jsxs)(u.Fragment,{children:[(0,s.jsx)("div",{className:"prose dark:prose-invert mb-8",children:(0,s.jsxs)("p",{children:["Change your password below, or ",(0,s.jsx)(n.$,{className:"px-0 text-inherit underline hover:cursor-pointer",onClick:()=>h(!t),type:"button",variant:"link",children:"cancel"}),"."]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-8 mb-8",children:[(0,s.jsxs)(o.e,{children:[(0,s.jsx)(l.J,{htmlFor:"password",className:"mb-2",children:"New password"}),(0,s.jsx)(i.p,{id:"password",...y("password",{required:"Please provide a new password."}),type:"password"}),g.password&&(0,s.jsx)(a.j,{message:g.password.message})]}),(0,s.jsxs)(o.e,{children:[(0,s.jsx)(l.J,{htmlFor:"passwordConfirm",className:"mb-2",children:"Confirm password"}),(0,s.jsx)(i.p,{id:"passwordConfirm",...y("passwordConfirm",{required:"Please confirm your new password.",validate:e=>e===C.current||"The passwords do not match"}),type:"password"}),g.passwordConfirm&&(0,s.jsx)(a.j,{message:g.passwordConfirm.message})]})]})]}):(0,s.jsxs)(u.Fragment,{children:[(0,s.jsx)("div",{className:"prose dark:prose-invert mb-8",children:(0,s.jsxs)("p",{className:"",children:["Change your account details below, or ",(0,s.jsx)(n.$,{className:"px-0 text-inherit underline hover:cursor-pointer",onClick:()=>h(!t),type:"button",variant:"link",children:"click here"})," to change your password."]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-8 mb-8",children:[(0,s.jsxs)(o.e,{children:[(0,s.jsx)(l.J,{htmlFor:"email",className:"mb-2",children:"Email Address"}),(0,s.jsx)(i.p,{id:"email",...y("email",{required:"Please provide an email."}),type:"email"}),g.email&&(0,s.jsx)(a.j,{message:g.email.message})]}),(0,s.jsxs)(o.e,{children:[(0,s.jsx)(l.J,{htmlFor:"name",className:"mb-2",children:"Name"}),(0,s.jsx)(i.p,{id:"name",...y("name",{required:"Please provide a name."}),type:"text"}),g.name&&(0,s.jsx)(a.j,{message:g.name.message})]})]})]}),(0,s.jsx)(n.$,{disabled:f||v||!w,type:"submit",variant:"default",children:f||v?"Processing":t?"Change Password":"Update Account"})]})}}},e=>{e.O(0,[2919,6768,9566,5089,9082,659,1263,7358],()=>e(e.s=45169)),_N_E=e.O()}]);