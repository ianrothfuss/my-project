(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6742],{1199:(e,r,t)=>{Promise.resolve().then(t.bind(t,90749)),Promise.resolve().then(t.bind(t,76771))},14632:(e,r,t)=>{"use strict";t.d(r,{cn:()=>o});var s=t(27183),a=t(33886);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}},15827:(e,r,t)=>{"use strict";t.d(r,{j:()=>o});var s=t(93495),a=t(27183);let o=e=>{let{message:r,as:t,className:o}=e;return r?(0,s.jsx)(t||"p",{className:(0,a.A)("text-error text-sm",o),children:r}):null}},18471:(e,r,t)=>{"use strict";t.d(r,{Q:()=>o});var s=t(93495),a=t(27183);t(3391);let o=e=>{let{className:r,error:t,message:o,success:n,warning:i}=e,l=o||t||n||i;return l?(0,s.jsx)("div",{className:(0,a.A)("p-4 my-8 rounded-lg",{"bg-success ":!!n," bg-warning":!!i,"bg-error":!!t},r),children:l}):null}},39822:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});var s=t(93495);t(3391);var a=t(14632);function o(e){let{className:r,type:t,...o}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,a.cn)("border-input bg-background file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...o})}},49464:(e,r,t)=>{"use strict";var s=t(57800);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}}),t.o(s,"useSelectedLayoutSegments")&&t.d(r,{useSelectedLayoutSegments:function(){return s.useSelectedLayoutSegments}})},59046:(e,r,t)=>{"use strict";t.d(r,{$:()=>l});var s=t(93495);t(3391);var a=t(55586),o=t(14743),n=t(14632);let i=(0,o.F)("relative inline-flex items-center justify-center hover:cursor-pointer gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90 ",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-card shadow-xs hover:bg-accent hover:bg-primary-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"text-primary/50 hover:text-primary/100 [&.active]:text-primary/100 py-2 px-4 uppercase font-mono tracking-[0.1em] text-xs",link:"text-primary underline-offset-4 hover:underline",nav:"text-primary/50 hover:text-primary/100 [&.active]:text-primary/100 p-0 pt-2 pb-6 uppercase font-mono tracking-[0.1em] text-xs"},size:{clear:"",default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:r,variant:t,size:o,asChild:l=!1,...c}=e,d=l?a.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,n.cn)(i({variant:t,size:o,className:r})),...c})}},63044:(e,r,t)=>{"use strict";t.d(r,{A:()=>i,AuthProvider:()=>n});var s=t(93495),a=t(3391);let o=(0,a.createContext)({}),n=e=>{let{children:r}=e,[t,n]=(0,a.useState)(),[i,l]=(0,a.useState)(),c=(0,a.useCallback)(async e=>{try{let t=await fetch("".concat("http://localhost:3000","/api/users/create"),{body:JSON.stringify({email:e.email,password:e.password,passwordConfirm:e.passwordConfirm}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(t.ok){var r;let{data:e,errors:s}=await t.json();if(s)throw Error(s[0].message);n(null==e||null==(r=e.loginUser)?void 0:r.user),l("loggedIn")}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),d=(0,a.useCallback)(async e=>{try{let r=await fetch("".concat("http://localhost:3000","/api/users/login"),{body:JSON.stringify({email:e.email,password:e.password}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(r.ok){let{errors:e,user:t}=await r.json();if(e)throw Error(e[0].message);return n(t),l("loggedIn"),t}throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),u=(0,a.useCallback)(async()=>{try{if((await fetch("".concat("http://localhost:3000","/api/users/logout"),{credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"})).ok)n(null),l("loggedOut");else throw Error("An error occurred while attempting to logout.")}catch(e){throw Error("An error occurred while attempting to logout.")}},[]);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("http://localhost:3000","/api/users/me"),{credentials:"include",headers:{"Content-Type":"application/json"},method:"GET"});if(e.ok){let{user:r}=await e.json();n(r||null),l(r?"loggedIn":void 0)}else throw Error("An error occurred while fetching your account.")}catch(e){throw n(null),Error("An error occurred while fetching your account.")}})()},[]);let p=(0,a.useCallback)(async e=>{try{let t=await fetch("".concat("http://localhost:3000","/api/users/forgot-password"),{body:JSON.stringify({email:e.email}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(t.ok){var r;let{data:e,errors:s}=await t.json();if(s)throw Error(s[0].message);n(null==e||null==(r=e.loginUser)?void 0:r.user)}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),h=(0,a.useCallback)(async e=>{try{let s=await fetch("".concat("http://localhost:3000","/api/users/reset-password"),{body:JSON.stringify({password:e.password,passwordConfirm:e.passwordConfirm,token:e.token}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(s.ok){var r,t;let{data:e,errors:a}=await s.json();if(a)throw Error(a[0].message);n(null==e||null==(r=e.loginUser)?void 0:r.user),l((null==e||null==(t=e.loginUser)?void 0:t.user)?"loggedIn":void 0)}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]);return(0,s.jsx)(o.Provider,{value:{create:c,forgotPassword:p,login:d,logout:u,resetPassword:h,setUser:n,status:i,user:t},children:r})},i=()=>(0,a.useContext)(o)},66068:(e,r,t)=>{"use strict";t.d(r,{J:()=>n});var s=t(93495);t(3391);var a=t(84034),o=t(14632);function n(e){let{className:r,...t}=e;return(0,s.jsx)(a.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm text-primary/50 font-mono leading-none select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}},76771:(e,r,t)=>{"use strict";t.d(r,{RenderParamsComponent:()=>i});var s=t(93495),a=t(49464),o=t(3391),n=t(18471);let i=e=>{let{className:r,onParams:t,params:i=["error","warning","success","message"]}=e,l=(0,a.useSearchParams)(),c=i.map(e=>null==l?void 0:l.get(e));return((0,o.useEffect)(()=>{c.length&&t&&t(c)},[c,t]),c.length)?(0,s.jsx)("div",{className:r,children:c.map((e,r)=>e?(0,s.jsx)(n.Q,{className:"mb-8",[i[r]]:e},e):null)}):null}},86906:(e,r,t)=>{"use strict";t.d(r,{e:()=>o});var s=t(93495),a=t(14632);let o=e=>{let{className:r,children:t}=e;return(0,s.jsx)("div",{className:(0,a.cn)("flex flex-col gap-2",r),children:t})}},90749:(e,r,t)=>{"use strict";t.d(r,{CreateAccountForm:()=>f});var s=t(93495),a=t(15827),o=t(86906),n=t(18471),i=t(59046),l=t(39822),c=t(66068),d=t(63044),u=t(42919),p=t.n(u),h=t(49464),m=t(3391),g=t(54299);let f=()=>{let e=(0,h.useSearchParams)(),r=e.toString()?"?".concat(e.toString()):"",{login:t}=(0,d.A)(),u=(0,h.useRouter)(),[f,v]=(0,m.useState)(!1),[w,x]=(0,m.useState)(null),{formState:{errors:b},handleSubmit:y,register:j,watch:C}=(0,g.mN)(),k=(0,m.useRef)({});k.current=C("password","");let S=(0,m.useCallback)(async r=>{let s=await fetch("".concat("http://localhost:3000","/api/users"),{body:JSON.stringify(r),headers:{"Content-Type":"application/json"},method:"POST"});if(!s.ok)return void x(s.statusText||"There was an error creating the account.");let a=e.get("redirect"),o=setTimeout(()=>{v(!0)},1e3);try{await t(r),clearTimeout(o),a?u.push(a):u.push("/account?success=".concat(encodeURIComponent("Account created successfully")))}catch(e){clearTimeout(o),x("There was an error with the credentials provided. Please try again.")}},[t,u,e]);return(0,s.jsxs)("form",{className:"max-w-lg py-4",onSubmit:y(S),children:[(0,s.jsx)("div",{className:"prose dark:prose-invert mb-6",children:(0,s.jsxs)("p",{children:["This is where new customers can signup and create a new account. To manage all users, ",(0,s.jsx)(p(),{href:"/admin/collections/users",children:"login to the admin dashboard"}),"."]})}),(0,s.jsx)(n.Q,{error:w}),(0,s.jsxs)("div",{className:"flex flex-col gap-8 mb-8",children:[(0,s.jsxs)(o.e,{children:[(0,s.jsx)(c.J,{htmlFor:"email",className:"mb-2",children:"Email Address"}),(0,s.jsx)(l.p,{id:"email",...j("email",{required:"Email is required."}),type:"email"}),b.email&&(0,s.jsx)(a.j,{message:b.email.message})]}),(0,s.jsxs)(o.e,{children:[(0,s.jsx)(c.J,{htmlFor:"password",className:"mb-2",children:"New password"}),(0,s.jsx)(l.p,{id:"password",...j("password",{required:"Password is required."}),type:"password"}),b.password&&(0,s.jsx)(a.j,{message:b.password.message})]}),(0,s.jsxs)(o.e,{children:[(0,s.jsx)(c.J,{htmlFor:"passwordConfirm",className:"mb-2",children:"Confirm Password"}),(0,s.jsx)(l.p,{id:"passwordConfirm",...j("passwordConfirm",{required:"Please confirm your password.",validate:e=>e===k.current||"The passwords do not match"}),type:"password"}),b.passwordConfirm&&(0,s.jsx)(a.j,{message:b.passwordConfirm.message})]})]}),(0,s.jsx)(i.$,{disabled:f,type:"submit",variant:"default",children:f?"Processing":"Create Account"}),(0,s.jsx)("div",{className:"prose dark:prose-invert mt-8",children:(0,s.jsxs)("p",{children:["Already have an account? ",(0,s.jsx)(p(),{href:"/login".concat(r),children:"Login"})]})})]})}}},e=>{e.O(0,[2919,6768,9566,659,1263,7358],()=>e(e.s=1199)),_N_E=e.O()}]);