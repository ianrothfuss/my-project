(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8494],{14632:(e,r,t)=>{"use strict";t.d(r,{cn:()=>s});var a=t(27183),o=t(33886);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,a.$)(r))}},15827:(e,r,t)=>{"use strict";t.d(r,{j:()=>s});var a=t(93495),o=t(27183);let s=e=>{let{message:r,as:t,className:s}=e;return r?(0,a.jsx)(t||"p",{className:(0,o.A)("text-error text-sm",s),children:r}):null}},23667:(e,r,t)=>{"use strict";t.d(r,{FindOrderForm:()=>p});var a=t(93495),o=t(15827),s=t(86906),i=t(59046),n=t(39822),l=t(66068),d=t(63044),c=t(49464),u=t(3391),m=t(54299);let p=e=>{let{initialEmail:r}=e,t=(0,c.useRouter)(),{user:p}=(0,d.A)(),{formState:{errors:h},handleSubmit:g,register:f}=(0,m.mN)({defaultValues:{email:r||(null==p?void 0:p.email)}}),v=(0,u.useCallback)(async e=>{t.push("/orders/".concat(e.orderID,"?email=").concat(e.email))},[t]);return(0,a.jsxs)(u.Fragment,{children:[(0,a.jsx)("h1",{className:"text-xl mb-4",children:"Find my order"}),(0,a.jsx)("div",{className:"prose dark:prose-invert mb-8",children:(0,a.jsx)("p",{children:"Please enter your email and order ID below."})}),(0,a.jsxs)("form",{className:"max-w-lg flex flex-col gap-8",onSubmit:g(v),children:[(0,a.jsxs)(s.e,{children:[(0,a.jsx)(l.J,{htmlFor:"email",className:"mb-2",children:"Email address"}),(0,a.jsx)(n.p,{id:"email",...f("email",{required:"Email is required."}),type:"email"}),h.email&&(0,a.jsx)(o.j,{message:h.email.message})]}),(0,a.jsxs)(s.e,{children:[(0,a.jsx)(l.J,{htmlFor:"orderID",className:"mb-2",children:"Order ID"}),(0,a.jsx)(n.p,{id:"orderID",...f("orderID",{required:"Order ID is required. You can find this in your email."}),type:"text"}),h.orderID&&(0,a.jsx)(o.j,{message:h.orderID.message})]}),(0,a.jsx)(i.$,{type:"submit",className:"self-start",variant:"default",children:"Find my order"})]})]})}},39822:(e,r,t)=>{"use strict";t.d(r,{p:()=>s});var a=t(93495);t(3391);var o=t(14632);function s(e){let{className:r,type:t,...s}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,o.cn)("border-input bg-background file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...s})}},49464:(e,r,t)=>{"use strict";var a=t(57800);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}}),t.o(a,"useSelectedLayoutSegments")&&t.d(r,{useSelectedLayoutSegments:function(){return a.useSelectedLayoutSegments}})},59046:(e,r,t)=>{"use strict";t.d(r,{$:()=>l});var a=t(93495);t(3391);var o=t(55586),s=t(14743),i=t(14632);let n=(0,s.F)("relative inline-flex items-center justify-center hover:cursor-pointer gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90 ",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-card shadow-xs hover:bg-accent hover:bg-primary-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"text-primary/50 hover:text-primary/100 [&.active]:text-primary/100 py-2 px-4 uppercase font-mono tracking-[0.1em] text-xs",link:"text-primary underline-offset-4 hover:underline",nav:"text-primary/50 hover:text-primary/100 [&.active]:text-primary/100 p-0 pt-2 pb-6 uppercase font-mono tracking-[0.1em] text-xs"},size:{clear:"",default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:r,variant:t,size:s,asChild:l=!1,...d}=e,c=l?o.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(n({variant:t,size:s,className:r})),...d})}},63044:(e,r,t)=>{"use strict";t.d(r,{A:()=>n,AuthProvider:()=>i});var a=t(93495),o=t(3391);let s=(0,o.createContext)({}),i=e=>{let{children:r}=e,[t,i]=(0,o.useState)(),[n,l]=(0,o.useState)(),d=(0,o.useCallback)(async e=>{try{let t=await fetch("".concat("http://localhost:3000","/api/users/create"),{body:JSON.stringify({email:e.email,password:e.password,passwordConfirm:e.passwordConfirm}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(t.ok){var r;let{data:e,errors:a}=await t.json();if(a)throw Error(a[0].message);i(null==e||null==(r=e.loginUser)?void 0:r.user),l("loggedIn")}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),c=(0,o.useCallback)(async e=>{try{let r=await fetch("".concat("http://localhost:3000","/api/users/login"),{body:JSON.stringify({email:e.email,password:e.password}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(r.ok){let{errors:e,user:t}=await r.json();if(e)throw Error(e[0].message);return i(t),l("loggedIn"),t}throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),u=(0,o.useCallback)(async()=>{try{if((await fetch("".concat("http://localhost:3000","/api/users/logout"),{credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"})).ok)i(null),l("loggedOut");else throw Error("An error occurred while attempting to logout.")}catch(e){throw Error("An error occurred while attempting to logout.")}},[]);(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("http://localhost:3000","/api/users/me"),{credentials:"include",headers:{"Content-Type":"application/json"},method:"GET"});if(e.ok){let{user:r}=await e.json();i(r||null),l(r?"loggedIn":void 0)}else throw Error("An error occurred while fetching your account.")}catch(e){throw i(null),Error("An error occurred while fetching your account.")}})()},[]);let m=(0,o.useCallback)(async e=>{try{let t=await fetch("".concat("http://localhost:3000","/api/users/forgot-password"),{body:JSON.stringify({email:e.email}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(t.ok){var r;let{data:e,errors:a}=await t.json();if(a)throw Error(a[0].message);i(null==e||null==(r=e.loginUser)?void 0:r.user)}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]),p=(0,o.useCallback)(async e=>{try{let a=await fetch("".concat("http://localhost:3000","/api/users/reset-password"),{body:JSON.stringify({password:e.password,passwordConfirm:e.passwordConfirm,token:e.token}),credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"});if(a.ok){var r,t;let{data:e,errors:o}=await a.json();if(o)throw Error(o[0].message);i(null==e||null==(r=e.loginUser)?void 0:r.user),l((null==e||null==(t=e.loginUser)?void 0:t.user)?"loggedIn":void 0)}else throw Error("Invalid login")}catch(e){throw Error("An error occurred while attempting to login.")}},[]);return(0,a.jsx)(s.Provider,{value:{create:d,forgotPassword:m,login:c,logout:u,resetPassword:p,setUser:i,status:n,user:t},children:r})},n=()=>(0,o.useContext)(s)},66068:(e,r,t)=>{"use strict";t.d(r,{J:()=>i});var a=t(93495);t(3391);var o=t(84034),s=t(14632);function i(e){let{className:r,...t}=e;return(0,a.jsx)(o.b,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm text-primary/50 font-mono leading-none select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...t})}},86906:(e,r,t)=>{"use strict";t.d(r,{e:()=>s});var a=t(93495),o=t(14632);let s=e=>{let{className:r,children:t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col gap-2",r),children:t})}},97989:(e,r,t)=>{Promise.resolve().then(t.bind(t,23667))}},e=>{e.O(0,[6768,9566,659,1263,7358],()=>e(e.s=97989)),_N_E=e.O()}]);