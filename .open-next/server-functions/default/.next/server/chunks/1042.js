"use strict";exports.id=1042,exports.ids=[1042],exports.modules={6848:a=>{a.exports={rE:"3.911.0"}},51042:(a,b,c)=>{c.d(b,{getDefaultRoleAssumer:()=>co,getDefaultRoleAssumerWithWebIdentity:()=>cp});var d=c(26146),e=c(33319),f=c(83646),g=c(60781);let h={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var i=c(99381),j=c(28492);class k extends j.T{constructor(a){super(a),Object.setPrototypeOf(this,k.prototype)}}let l=a=>({...a,...a.SecretAccessKey&&{SecretAccessKey:i.$}}),m=a=>({...a,...a.Credentials&&{Credentials:l(a.Credentials)}});class n extends k{name="ExpiredTokenException";$fault="client";constructor(a){super({name:"ExpiredTokenException",$fault:"client",...a}),Object.setPrototypeOf(this,n.prototype)}}class o extends k{name="MalformedPolicyDocumentException";$fault="client";constructor(a){super({name:"MalformedPolicyDocumentException",$fault:"client",...a}),Object.setPrototypeOf(this,o.prototype)}}class p extends k{name="PackedPolicyTooLargeException";$fault="client";constructor(a){super({name:"PackedPolicyTooLargeException",$fault:"client",...a}),Object.setPrototypeOf(this,p.prototype)}}class q extends k{name="RegionDisabledException";$fault="client";constructor(a){super({name:"RegionDisabledException",$fault:"client",...a}),Object.setPrototypeOf(this,q.prototype)}}class r extends k{name="IDPRejectedClaimException";$fault="client";constructor(a){super({name:"IDPRejectedClaimException",$fault:"client",...a}),Object.setPrototypeOf(this,r.prototype)}}class s extends k{name="InvalidIdentityTokenException";$fault="client";constructor(a){super({name:"InvalidIdentityTokenException",$fault:"client",...a}),Object.setPrototypeOf(this,s.prototype)}}let t=a=>({...a,...a.WebIdentityToken&&{WebIdentityToken:i.$}}),u=a=>({...a,...a.Credentials&&{Credentials:l(a.Credentials)}});class v extends k{name="IDPCommunicationErrorException";$fault="client";constructor(a){super({name:"IDPCommunicationErrorException",$fault:"client",...a}),Object.setPrototypeOf(this,v.prototype)}}var w=c(14355),x=c(579),y=c(51429),z=c(40288),A=c(98327),B=c(27613);let C=async(a,b)=>{let c;return c=aV({...O(a,b),[al]:an,[aQ]:ak}),ai(b,aj,"/",void 0,c)},D=async(a,b)=>{let c;return c=aV({...P(a,b),[al]:aq,[aQ]:ak}),ai(b,aj,"/",void 0,c)},E=async(a,b)=>{if(a.statusCode>=300)return G(a,b);let c=await (0,w.t_)(a.body,b),d={};return d=Y(c.AssumeRoleResult,b),{$metadata:ag(a),...d}},F=async(a,b)=>{if(a.statusCode>=300)return G(a,b);let c=await (0,w.t_)(a.body,b),d={};return d=Z(c.AssumeRoleWithWebIdentityResult,b),{$metadata:ag(a),...d}},G=async(a,b)=>{let c={...a,body:await (0,w.FI)(a.body,b)},d=aW(a,c.body);switch(d){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await H(c,b);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await L(c,b);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await M(c,b);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await N(c,b);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await I(c,b);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await J(c,b);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await K(c,b);default:return ah({output:a,parsedBody:c.body.Error,errorCode:d})}},H=async(a,b)=>{let c=a.body,d=_(c.Error,b),e=new n({$metadata:ag(a),...d});return(0,j.M)(e,c)},I=async(a,b)=>{let c=a.body,d=aa(c.Error,b),e=new v({$metadata:ag(a),...d});return(0,j.M)(e,c)},J=async(a,b)=>{let c=a.body,d=ab(c.Error,b),e=new r({$metadata:ag(a),...d});return(0,j.M)(e,c)},K=async(a,b)=>{let c=a.body,d=ac(c.Error,b),e=new s({$metadata:ag(a),...d});return(0,j.M)(e,c)},L=async(a,b)=>{let c=a.body,d=ad(c.Error,b),e=new o({$metadata:ag(a),...d});return(0,j.M)(e,c)},M=async(a,b)=>{let c=a.body,d=ae(c.Error,b),e=new p({$metadata:ag(a),...d});return(0,j.M)(e,c)},N=async(a,b)=>{let c=a.body,d=af(c.Error,b),e=new q({$metadata:ag(a),...d});return(0,j.M)(e,c)},O=(a,b)=>{let c={};if(null!=a[aG]&&(c[aG]=a[aG]),null!=a[aH]&&(c[aH]=a[aH]),null!=a[aA]){let d=Q(a[aA],b);a[aA]?.length===0&&(c.PolicyArns=[]),Object.entries(d).forEach(([a,b])=>{c[`PolicyArns.${a}`]=b})}if(null!=a[az]&&(c[az]=a[az]),null!=a[av]&&(c[av]=a[av]),null!=a[aN]){let d=W(a[aN],b);a[aN]?.length===0&&(c.Tags=[]),Object.entries(d).forEach(([a,b])=>{c[`Tags.${a}`]=b})}if(null!=a[aP]){let d=V(a[aP],b);a[aP]?.length===0&&(c.TransitiveTagKeys=[]),Object.entries(d).forEach(([a,b])=>{c[`TransitiveTagKeys.${a}`]=b})}if(null!=a[ax]&&(c[ax]=a[ax]),null!=a[aL]&&(c[aL]=a[aL]),null!=a[aO]&&(c[aO]=a[aO]),null!=a[aK]&&(c[aK]=a[aK]),null!=a[aC]){let d=T(a[aC],b);a[aC]?.length===0&&(c.ProvidedContexts=[]),Object.entries(d).forEach(([a,b])=>{c[`ProvidedContexts.${a}`]=b})}return c},P=(a,b)=>{let c={};if(null!=a[aG]&&(c[aG]=a[aG]),null!=a[aH]&&(c[aH]=a[aH]),null!=a[aS]&&(c[aS]=a[aS]),null!=a[aD]&&(c[aD]=a[aD]),null!=a[aA]){let d=Q(a[aA],b);a[aA]?.length===0&&(c.PolicyArns=[]),Object.entries(d).forEach(([a,b])=>{c[`PolicyArns.${a}`]=b})}return null!=a[az]&&(c[az]=a[az]),null!=a[av]&&(c[av]=a[av]),c},Q=(a,b)=>{let c={},d=1;for(let e of a)null!==e&&(Object.entries(R(e,b)).forEach(([a,b])=>{c[`member.${d}.${a}`]=b}),d++);return c},R=(a,b)=>{let c={};return null!=a[aT]&&(c[aT]=a[aT]),c},S=(a,b)=>{let c={};return null!=a[aB]&&(c[aB]=a[aB]),null!=a[au]&&(c[au]=a[au]),c},T=(a,b)=>{let c={},d=1;for(let e of a)null!==e&&(Object.entries(S(e,b)).forEach(([a,b])=>{c[`member.${d}.${a}`]=b}),d++);return c},U=(a,b)=>{let c={};return null!=a[ay]&&(c[ay]=a[ay]),null!=a[aR]&&(c[aR]=a[aR]),c},V=(a,b)=>{let c={},d=1;for(let b of a)null!==b&&(c[`member.${d}`]=b,d++);return c},W=(a,b)=>{let c={},d=1;for(let e of a)null!==e&&(Object.entries(U(e,b)).forEach(([a,b])=>{c[`member.${d}.${a}`]=b}),d++);return c},X=(a,b)=>{let c={};return null!=a[ao]&&(c[ao]=(0,y.lK)(a[ao])),null!=a[ar]&&(c[ar]=(0,y.lK)(a[ar])),c},Y=(a,b)=>{let c={};return null!=a[at]&&(c[at]=$(a[at],b)),null!=a[ap]&&(c[ap]=X(a[ap],b)),null!=a[aE]&&(c[aE]=(0,y.xW)(a[aE])),null!=a[aK]&&(c[aK]=(0,y.lK)(a[aK])),c},Z=(a,b)=>{let c={};return null!=a[at]&&(c[at]=$(a[at],b)),null!=a[aJ]&&(c[aJ]=(0,y.lK)(a[aJ])),null!=a[ap]&&(c[ap]=X(a[ap],b)),null!=a[aE]&&(c[aE]=(0,y.xW)(a[aE])),null!=a[aF]&&(c[aF]=(0,y.lK)(a[aF])),null!=a[as]&&(c[as]=(0,y.lK)(a[as])),null!=a[aK]&&(c[aK]=(0,y.lK)(a[aK])),c},$=(a,b)=>{let c={};return null!=a[am]&&(c[am]=(0,y.lK)(a[am])),null!=a[aI]&&(c[aI]=(0,y.lK)(a[aI])),null!=a[aM]&&(c[aM]=(0,y.lK)(a[aM])),null!=a[aw]&&(c[aw]=(0,y.Y0)((0,z.t_)(a[aw]))),c},_=(a,b)=>{let c={};return null!=a[aU]&&(c[aU]=(0,y.lK)(a[aU])),c},aa=(a,b)=>{let c={};return null!=a[aU]&&(c[aU]=(0,y.lK)(a[aU])),c},ab=(a,b)=>{let c={};return null!=a[aU]&&(c[aU]=(0,y.lK)(a[aU])),c},ac=(a,b)=>{let c={};return null!=a[aU]&&(c[aU]=(0,y.lK)(a[aU])),c},ad=(a,b)=>{let c={};return null!=a[aU]&&(c[aU]=(0,y.lK)(a[aU])),c},ae=(a,b)=>{let c={};return null!=a[aU]&&(c[aU]=(0,y.lK)(a[aU])),c},af=(a,b)=>{let c={};return null!=a[aU]&&(c[aU]=(0,y.lK)(a[aU])),c},ag=a=>({httpStatusCode:a.statusCode,requestId:a.headers["x-amzn-requestid"]??a.headers["x-amzn-request-id"]??a.headers["x-amz-request-id"],extendedRequestId:a.headers["x-amz-id-2"],cfId:a.headers["x-amz-cf-id"]}),ah=(0,A.j)(k),ai=async(a,b,c,d,e)=>{let{hostname:f,protocol:g="https",port:h,path:i}=await a.endpoint(),j={protocol:g,hostname:f,port:h,method:"POST",path:i.endsWith("/")?i.slice(0,-1)+c:i+c,headers:b};return void 0!==d&&(j.hostname=d),void 0!==e&&(j.body=e),new x.K(j)},aj={"content-type":"application/x-www-form-urlencoded"},ak="2011-06-15",al="Action",am="AccessKeyId",an="AssumeRole",ao="AssumedRoleId",ap="AssumedRoleUser",aq="AssumeRoleWithWebIdentity",ar="Arn",as="Audience",at="Credentials",au="ContextAssertion",av="DurationSeconds",aw="Expiration",ax="ExternalId",ay="Key",az="Policy",aA="PolicyArns",aB="ProviderArn",aC="ProvidedContexts",aD="ProviderId",aE="PackedPolicySize",aF="Provider",aG="RoleArn",aH="RoleSessionName",aI="SecretAccessKey",aJ="SubjectFromWebIdentityToken",aK="SourceIdentity",aL="SerialNumber",aM="SessionToken",aN="Tags",aO="TokenCode",aP="TransitiveTagKeys",aQ="Version",aR="Value",aS="WebIdentityToken",aT="arn",aU="message",aV=a=>Object.entries(a).map(([a,b])=>(0,B.$)(a)+"="+(0,B.$)(b)).join("&"),aW=(a,b)=>b.Error?.Code!==void 0?b.Error.Code:404==a.statusCode?"NotFound":void 0;class aX extends g.u.classBuilder().ep(h).m(function(a,b,c,d){return[(0,f.TM)(c,this.serialize,this.deserialize),(0,e.r)(c,a.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,m).ser(C).de(E).build(){}class aY extends g.u.classBuilder().ep(h).m(function(a,b,c,d){return[(0,f.TM)(c,this.serialize,this.deserialize),(0,e.r)(c,a.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(t,u).ser(D).de(F).build(){}let aZ="us-east-1",a$=a=>{if("string"==typeof a?.Arn){let b=a.Arn.split(":");if(b.length>4&&""!==b[4])return b[4]}},a_=async(a,b,c)=>{let d="function"==typeof a?await a():a,e="function"==typeof b?await b():b;return c?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${d} (provider)`,`${e} (parent client)`,`${aZ} (STS default)`),d??e??aZ},a0=a=>a?.metadata?.handlerProtocol==="h2";var a1=c(514),a2=c(67110),a3=c(54545),a4=c(56708),a5=c(69618),a6=c(1207),a7=c(79808),a8=c(66337),a9=c(4745),ba=c(94514),bb=c(94130),bc=c(3640),bd=c(76282),be=c(56465),bf=c(58179),bg=c(23301),bh=c(65960);let bi=async(a,b,c)=>({operation:(0,bg.u)(b).operation,region:await (0,bh.t)(a.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),bj=a=>{let b=[];if("AssumeRoleWithWebIdentity"===a.operation)b.push({schemeId:"smithy.api#noAuth"});else b.push({schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:a.region},propertiesExtractor:(a,b)=>({signingProperties:{config:a,context:b}})});return b};var bk=c(6848),bl=c(71500),bm=c(45579),bn=c(62763),bo=c(27033),bp=c(60817),bq=c(69494),br=c(59862),bs=c(93668),bt=c(71487),bu=c(80850),bv=c(67821),bw=c(94585),bx=c(14187),by=c(13188),bz=c(78476),bA=c(26666),bB=c(16152),bC=c(77915),bD=c(23430),bE=c(69480),bF=c(28506),bG=c(18413),bH=c(87225),bI=c(36004),bJ=c(65352);let bK="required",bL="type",bM="argv",bN="booleanEquals",bO="stringEquals",bP="sigv4",bQ="us-east-1",bR="endpoint",bS="https://sts.{Region}.{PartitionResult#dnsSuffix}",bT="tree",bU="error",bV="getAttr",bW={[bK]:!1,[bL]:"String"},bX={[bK]:!0,default:!1,[bL]:"Boolean"},bY={ref:"Endpoint"},bZ={fn:"isSet",[bM]:[{ref:"Region"}]},b$={ref:"Region"},b_={fn:"aws.partition",[bM]:[b$],assign:"PartitionResult"},b0={ref:"UseFIPS"},b1={ref:"UseDualStack"},b2={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:bP,signingName:"sts",signingRegion:bQ}]},headers:{}},b3={},b4={conditions:[{fn:bO,[bM]:[b$,"aws-global"]}],[bR]:b2,[bL]:bR},b5={fn:bN,[bM]:[b0,!0]},b6={fn:bN,[bM]:[b1,!0]},b7={fn:bV,[bM]:[{ref:"PartitionResult"},"supportsFIPS"]},b8={ref:"PartitionResult"},b9={fn:bN,[bM]:[!0,{fn:bV,[bM]:[b8,"supportsDualStack"]}]},ca=[{fn:"isSet",[bM]:[bY]}],cb=[b5],cc=[b6],cd={version:"1.0",parameters:{Region:bW,UseDualStack:bX,UseFIPS:bX,Endpoint:bW,UseGlobalEndpoint:bX},rules:[{conditions:[{fn:bN,[bM]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[bM]:ca},bZ,b_,{fn:bN,[bM]:[b0,!1]},{fn:bN,[bM]:[b1,!1]}],rules:[{conditions:[{fn:bO,[bM]:[b$,"ap-northeast-1"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"ap-south-1"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"ap-southeast-1"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"ap-southeast-2"]}],endpoint:b2,[bL]:bR},b4,{conditions:[{fn:bO,[bM]:[b$,"ca-central-1"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"eu-central-1"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"eu-north-1"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"eu-west-1"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"eu-west-2"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"eu-west-3"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"sa-east-1"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,bQ]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"us-east-2"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"us-west-1"]}],endpoint:b2,[bL]:bR},{conditions:[{fn:bO,[bM]:[b$,"us-west-2"]}],endpoint:b2,[bL]:bR},{endpoint:{url:bS,properties:{authSchemes:[{name:bP,signingName:"sts",signingRegion:"{Region}"}]},headers:b3},[bL]:bR}],[bL]:bT},{conditions:ca,rules:[{conditions:cb,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[bL]:bU},{conditions:cc,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[bL]:bU},{endpoint:{url:bY,properties:b3,headers:b3},[bL]:bR}],[bL]:bT},{conditions:[bZ],rules:[{conditions:[b_],rules:[{conditions:[b5,b6],rules:[{conditions:[{fn:bN,[bM]:[!0,b7]},b9],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:b3,headers:b3},[bL]:bR}],[bL]:bT},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[bL]:bU}],[bL]:bT},{conditions:cb,rules:[{conditions:[{fn:bN,[bM]:[b7,!0]}],rules:[{conditions:[{fn:bO,[bM]:[{fn:bV,[bM]:[b8,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:b3,headers:b3},[bL]:bR},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:b3,headers:b3},[bL]:bR}],[bL]:bT},{error:"FIPS is enabled but this partition does not support FIPS",[bL]:bU}],[bL]:bT},{conditions:cc,rules:[{conditions:[b9],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:b3,headers:b3},[bL]:bR}],[bL]:bT},{error:"DualStack is enabled but this partition does not support DualStack",[bL]:bU}],[bL]:bT},b4,{endpoint:{url:bS,properties:b3,headers:b3},[bL]:bR}],[bL]:bT}],[bL]:bT},{error:"Invalid Configuration: Missing Region",[bL]:bU}]},ce=new bH.k({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),cf=(a,b={})=>ce.get(a,()=>(0,bI.s)(cd,{endpointParams:a,logger:b.logger}));bJ.m.aws=bG.awsEndpointFunctions;var cg=c(41490),ch=c(76022),ci=c(64275),cj=c(98695),ck=c(71e3),cl=c(93820);class cm extends be.K{config;constructor(...[a]){let b=(a=>{(0,ci.I)(process.version);let b=(0,ch.I)(a),c=()=>b().then(cg.l),d=(a=>({apiVersion:"2011-06-15",base64Decoder:a?.base64Decoder??bC.E,base64Encoder:a?.base64Encoder??bD.n,disableHostPrefix:a?.disableHostPrefix??!1,endpointProvider:a?.endpointProvider??cf,extensions:a?.extensions??[],httpAuthSchemeProvider:a?.httpAuthSchemeProvider??bj,httpAuthSchemes:a?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:a=>a.getIdentityProvider("aws.auth#sigv4"),signer:new bn.f2},{schemeId:"smithy.api#noAuth",identityProvider:a=>a.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new bt.m}],logger:a?.logger??new bA.N,serviceId:a?.serviceId??"STS",urlParser:a?.urlParser??bB.parseUrl,utf8Decoder:a?.utf8Decoder??bE.a,utf8Encoder:a?.utf8Encoder??bF.P}))(a);(0,bl.I)(process.version);let e={profile:a?.profile,logger:d.logger};return{...d,...a,runtime:"node",defaultsMode:b,authSchemePreference:a?.authSchemePreference??(0,bv.Z)(bm.$,e),bodyLengthChecker:a?.bodyLengthChecker??by.n,defaultUserAgentProvider:a?.defaultUserAgentProvider??(0,bo.pf)({serviceId:d.serviceId,clientVersion:bk.rE}),httpAuthSchemes:a?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:b=>b.getIdentityProvider("aws.auth#sigv4")||(async b=>await a.credentialDefaultProvider(b?.__config||{})()),signer:new bn.f2},{schemeId:"smithy.api#noAuth",identityProvider:a=>a.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new bt.m}],maxAttempts:a?.maxAttempts??(0,bv.Z)(bc.qs,a),region:a?.region??(0,bv.Z)(bq.GG,{...bq.zH,...e}),requestHandler:bw.$.create(a?.requestHandler??c),retryMode:a?.retryMode??(0,bv.Z)({...bc.kN,default:async()=>(await c()).retryMode||bz.L0},a),sha256:a?.sha256??bu.V.bind(null,"sha256"),streamCollector:a?.streamCollector??bx.k,useDualstackEndpoint:a?.useDualstackEndpoint??(0,bv.Z)(br.e$,e),useFipsEndpoint:a?.useFipsEndpoint??(0,bv.Z)(bs.Ko,e),userAgentAppId:a?.userAgentAppId??(0,bv.Z)(bp.hV,e)}})(a||{});super(b),this.initConfig=b;let c=(a=>Object.assign(a,{useDualstackEndpoint:a.useDualstackEndpoint??!1,useFipsEndpoint:a.useFipsEndpoint??!1,useGlobalEndpoint:a.useGlobalEndpoint??!1,defaultSigningName:"sts"}))(b),d=(0,a4.D)(c),e=(0,bc.$z)(d),f=(0,a6.T)(e),g=(0,a1.OV)(f),h=((a,b)=>{let c=Object.assign((0,cj.R)(a),(0,cl.xA)(a),(0,ck.e)(a),(a=>{let b=a.httpAuthSchemes,c=a.httpAuthSchemeProvider,d=a.credentials;return{setHttpAuthScheme(a){let c=b.findIndex(b=>b.schemeId===a.schemeId);-1===c?b.push(a):b.splice(c,1,a)},httpAuthSchemes:()=>b,setHttpAuthSchemeProvider(a){c=a},httpAuthSchemeProvider:()=>c,setCredentials(a){d=a},credentials:()=>d}})(a));return b.forEach(a=>a.configure(c)),Object.assign(a,(0,cj.$)(c),(0,cl.uv)(c),(0,ck.j)(c),(a=>({httpAuthSchemes:a.httpAuthSchemes(),httpAuthSchemeProvider:a.httpAuthSchemeProvider(),credentials:a.credentials()}))(c))})((a=>{let b=Object.assign(a,{stsClientCtor:cm});return Object.assign((0,bf.h)(b),{authSchemePreference:(0,bh.t)(a.authSchemePreference??[])})})((0,bb.C)(g)),a?.extensions||[]);this.config=h,this.middlewareStack.use((0,a5.sM)(this.config)),this.middlewareStack.use((0,bd.ey)(this.config)),this.middlewareStack.use((0,ba.vK)(this.config)),this.middlewareStack.use((0,a1.TC)(this.config)),this.middlewareStack.use((0,a2.Y7)(this.config)),this.middlewareStack.use((0,a3.n)(this.config)),this.middlewareStack.use((0,a7.w)(this.config,{httpAuthSchemeParametersProvider:bi,identityProviderConfigProvider:async a=>new a8.h({"aws.auth#sigv4":a.credentials})})),this.middlewareStack.use((0,a9.l)(this.config))}destroy(){super.destroy()}}let cn=(a,b)=>b?class extends a{constructor(a){for(let c of(super(a),b))this.middlewareStack.use(c)}}:a,co=(a={},b)=>((a,b)=>{let c,e;return async(f,g)=>{if(e=f,!c){let{logger:d=a?.parentClientConfig?.logger,region:f,requestHandler:g=a?.parentClientConfig?.requestHandler,credentialProviderLogger:h}=a,i=await a_(f,a?.parentClientConfig?.region,h),j=!a0(g);c=new b({profile:a?.parentClientConfig?.profile,credentialDefaultProvider:()=>async()=>e,region:i,requestHandler:j?g:void 0,logger:d})}let{Credentials:h,AssumedRoleUser:i}=await c.send(new aX(g));if(!h||!h.AccessKeyId||!h.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${g.RoleArn}`);let j=a$(i),k={accessKeyId:h.AccessKeyId,secretAccessKey:h.SecretAccessKey,sessionToken:h.SessionToken,expiration:h.Expiration,...h.CredentialScope&&{credentialScope:h.CredentialScope},...j&&{accountId:j}};return(0,d.g)(k,"CREDENTIALS_STS_ASSUME_ROLE","i"),k}})(a,cn(cm,b)),cp=(a={},b)=>((a,b)=>{let c;return async e=>{if(!c){let{logger:d=a?.parentClientConfig?.logger,region:e,requestHandler:f=a?.parentClientConfig?.requestHandler,credentialProviderLogger:g}=a,h=await a_(e,a?.parentClientConfig?.region,g),i=!a0(f);c=new b({profile:a?.parentClientConfig?.profile,region:h,requestHandler:i?f:void 0,logger:d})}let{Credentials:f,AssumedRoleUser:g}=await c.send(new aY(e));if(!f||!f.AccessKeyId||!f.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${e.RoleArn}`);let h=a$(g),i={accessKeyId:f.AccessKeyId,secretAccessKey:f.SecretAccessKey,sessionToken:f.SessionToken,expiration:f.Expiration,...f.CredentialScope&&{credentialScope:f.CredentialScope},...h&&{accountId:h}};return h&&(0,d.g)(i,"RESOLVED_ACCOUNT_ID","T"),(0,d.g)(i,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),i}})(a,cn(cm,b))}};