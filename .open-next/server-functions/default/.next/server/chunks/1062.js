"use strict";exports.id=1062,exports.ids=[1062],exports.modules={71062:(a,b,c)=>{c.r(b),c.d(b,{UploadComponent:()=>t});var d=c(16960),e=c(83581),f=c(74970),g=c(78566),h=c(45436),i=c(14600),j=c(48824),k=c(50291),l=c(44059),m=c(9796),n=c(9109),o=c(98405),p=c(37149),q=c(869),r="lexical-upload",s={depth:0},t=a=>{let{data:{fields:b,relationTo:c,value:t},nodeKey:u}=a;if("object"==typeof t)throw Error("Upload value should be a string or number. The Lexical Upload component should not receive the populated value object.");let{config:{routes:{api:v},serverURL:w},getEntityConfig:x}=(0,l.b)(),y=(0,q.useRef)(null),{uuid:z}=(0,g.b)(),A=(0,m.useEditDepth)(),[B]=(0,i.DF)(),{editorConfig:C,fieldProps:{schemaPath:D}}=(0,g.b)(),E=(0,j.a)(),{i18n:F,t:G}=(0,n.d)(),[H,I]=(0,q.useReducer)(a=>a+1,0),[J]=(0,q.useState)(()=>x({collectionSlug:c})),K=(0,q.useId)(),L=(0,m.formatDrawerSlug)({slug:"lexical-upload-drawer-"+z+K,depth:A}),{toggleDrawer:M}=(0,e.a)(L,!0),{closeDocumentDrawer:N,DocumentDrawer:O,DocumentDrawerToggler:P}=(0,f.a)({id:t,collectionSlug:J.slug}),[{data:Q},{setParams:R}]=(0,m.usePayloadAPI)(`${w}${v}/${J.slug}/${t}`,{initialParams:s}),S=Q?.thumbnailURL||Q?.url,T=(0,q.useCallback)(()=>{B.update(()=>{(0,o.nsf)(u)?.remove()})},[B,u]),U=(0,q.useCallback)(a=>{R({...s,cacheBust:H}),I(),N()},[R,H,N]),V=C?.resolvedFeatureMap?.get("upload")?.sanitizedClientFeatureProps.collections?.[J.slug]?.hasExtraFields,W=(0,q.useCallback)((a,b)=>{B.update(()=>{let a=(0,o.nsf)(u);if(a){let c={...a.getData(),fields:b};a.setData(c)}})},[B,u]),X=S&&Q?.width&&Q?.height?Q.width>Q.height?"landscape":"portrait":"landscape";return(0,h.jsxs)("div",{className:`${r} ${r}--${X}`,"data-filename":Q?.filename,ref:y,children:[(0,h.jsxs)("div",{className:`${r}__card`,children:[(0,h.jsxs)("div",{className:`${r}__media`,children:[(0,h.jsx)(m.Thumbnail,{collectionSlug:c,fileSrc:(0,p.w)(Q?.mimeType)?S:null,height:Q?.height,size:"none",width:Q?.width}),E&&(0,h.jsx)("div",{className:`${r}__overlay ${r}__floater`,children:(0,h.jsxs)("div",{className:`${r}__actions`,role:"toolbar",children:[V?(0,h.jsx)(m.Button,{buttonStyle:"icon-label",className:`${r}__upload-drawer-toggler`,disabled:!E,el:"button",icon:"edit",onClick:M,round:!0,size:"medium",tooltip:G("fields:editRelationship")}):null,(0,h.jsx)(m.Button,{buttonStyle:"icon-label",className:`${r}__swap-drawer-toggler`,disabled:!E,el:"button",icon:"swap",onClick:()=>{B.dispatchCommand(d.b,{replace:{nodeKey:u}})},round:!0,size:"medium",tooltip:G("fields:swapUpload")}),(0,h.jsx)(m.Button,{buttonStyle:"icon-label",className:`${r}__removeButton`,disabled:!E,icon:"x",onClick:a=>{a.preventDefault(),T()},round:!0,size:"medium",tooltip:G("fields:removeUpload")})]})})]}),(0,h.jsxs)("div",{className:`${r}__metaOverlay ${r}__floater`,children:[(0,h.jsx)(P,{className:`${r}__doc-drawer-toggler`,children:(0,h.jsx)("strong",{className:`${r}__filename`,children:Q?.filename||G("general:untitled")})}),(0,h.jsx)("div",{className:`${r}__collectionLabel`,children:(0,k.s)(J.labels.singular,F)})]})]}),t?(0,h.jsx)(O,{onSave:U}):null,V?(0,h.jsx)(d.a,{data:b,drawerSlug:L,drawerTitle:G("general:editLabel",{label:(0,k.s)(J.labels.singular,F)}),featureKey:"upload",handleDrawerSubmit:W,schemaPath:D,schemaPathSuffix:J.slug}):null]})}}};