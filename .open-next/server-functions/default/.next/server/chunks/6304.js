"use strict";exports.id=6304,exports.ids=[6304],exports.modules={76304:(a,b,c)=>{c.d(b,{fromIni:()=>r});var d=c(89010),e=c(36137),f=c(16111),g=c(26146),h=c(20411);let i=a=>(0,g.g)(a,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),j=async(a,b,d,j={},l)=>{d.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let m=b[a],{source_profile:n,region:o}=m;if(!d.roleAssumer){let{getDefaultRoleAssumer:a}=await Promise.all([c.e(3035),c.e(1042)]).then(c.bind(c,51042));d.roleAssumer=a({...d.clientConfig,credentialProviderLogger:d.logger,parentClientConfig:{...d?.parentClientConfig,region:o??d?.parentClientConfig?.region}},d.clientPlugins)}if(n&&n in j)throw new f.C(`Detected a cycle attempting to resolve credentials for profile ${(0,e.Bz)(d)}. Profiles visited: `+Object.keys(j).join(", "),{logger:d.logger});d.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${n?`source_profile=[${n}]`:`profile=[${a}]`}`);let p=n?l(n,b,d,{...j,[n]:!0},k(b[n]??{})):(await ((a,b,d)=>{let e={EcsContainer:async a=>{let{fromHttp:b}=await c.e(9068).then(c.bind(c,69068)),{fromContainerMetadata:e}=await c.e(8743).then(c.bind(c,98743));return d?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>(0,h.c)(b(a??{}),e(a))().then(i)},Ec2InstanceMetadata:async a=>{d?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:b}=await c.e(8743).then(c.bind(c,98743));return async()=>b(a)().then(i)},Environment:async a=>{d?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:b}=await Promise.resolve().then(c.bind(c,29204));return async()=>b(a)().then(i)}};if(a in e)return e[a];throw new f.C(`Unsupported credential source in profile ${b}. Got ${a}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:d})})(m.credential_source,a,d.logger)(d))();if(k(m))return p.then(a=>(0,g.g)(a,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let b={RoleArn:m.role_arn,RoleSessionName:m.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:m.external_id,DurationSeconds:parseInt(m.duration_seconds||"3600",10)},{mfa_serial:c}=m;if(c){if(!d.mfaCodeProvider)throw new f.C(`Profile ${a} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:d.logger,tryNextLink:!1});b.SerialNumber=c,b.TokenCode=await d.mfaCodeProvider(c)}let e=await p;return d.roleAssumer(e,b).then(a=>(0,g.g)(a,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},k=a=>!a.role_arn&&!!a.credential_source,l=async(a,b)=>c.e(3468).then(c.bind(c,43468)).then(({fromProcess:c})=>c({...a,profile:b})().then(a=>(0,g.g)(a,"CREDENTIALS_PROFILE_PROCESS","v"))),m=async(a,b,d={})=>{let{fromSSO:e}=await c.e(9895).then(c.bind(c,99895));return e({profile:a,logger:d.logger,parentClientConfig:d.parentClientConfig,clientConfig:d.clientConfig})().then(a=>b.sso_session?(0,g.g)(a,"CREDENTIALS_PROFILE_SSO","r"):(0,g.g)(a,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},n=a=>!!a&&"object"==typeof a&&"string"==typeof a.aws_access_key_id&&"string"==typeof a.aws_secret_access_key&&["undefined","string"].indexOf(typeof a.aws_session_token)>-1&&["undefined","string"].indexOf(typeof a.aws_account_id)>-1,o=async(a,b)=>{b?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let c={accessKeyId:a.aws_access_key_id,secretAccessKey:a.aws_secret_access_key,sessionToken:a.aws_session_token,...a.aws_credential_scope&&{credentialScope:a.aws_credential_scope},...a.aws_account_id&&{accountId:a.aws_account_id}};return(0,g.g)(c,"CREDENTIALS_PROFILE","n")},p=async(a,b)=>c.e(3437).then(c.bind(c,33437)).then(({fromTokenFile:c})=>c({webIdentityTokenFile:a.web_identity_token_file,roleArn:a.role_arn,roleSessionName:a.role_session_name,roleAssumerWithWebIdentity:b.roleAssumerWithWebIdentity,logger:b.logger,parentClientConfig:b.parentClientConfig})().then(a=>(0,g.g)(a,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),q=async(a,b,c,d={},e=!1)=>{let g=b[a];if(Object.keys(d).length>0&&n(g))return o(g,c);if(e||((a,{profile:b="default",logger:c}={})=>!!a&&"object"==typeof a&&"string"==typeof a.role_arn&&["undefined","string"].indexOf(typeof a.role_session_name)>-1&&["undefined","string"].indexOf(typeof a.external_id)>-1&&["undefined","string"].indexOf(typeof a.mfa_serial)>-1&&(((a,{profile:b,logger:c})=>{let d="string"==typeof a.source_profile&&void 0===a.credential_source;return d&&c?.debug?.(`    ${b} isAssumeRoleWithSourceProfile source_profile=${a.source_profile}`),d})(a,{profile:b,logger:c})||((a,{profile:b,logger:c})=>{let d="string"==typeof a.credential_source&&void 0===a.source_profile;return d&&c?.debug?.(`    ${b} isCredentialSourceProfile credential_source=${a.credential_source}`),d})(a,{profile:b,logger:c})))(g,{profile:a,logger:c.logger}))return j(a,b,c,d,q);if(n(g))return o(g,c);if((a=>!!a&&"object"==typeof a&&"string"==typeof a.web_identity_token_file&&"string"==typeof a.role_arn&&["undefined","string"].indexOf(typeof a.role_session_name)>-1)(g))return p(g,c);if((a=>!!a&&"object"==typeof a&&"string"==typeof a.credential_process)(g))return l(c,a);if((a=>a&&("string"==typeof a.sso_start_url||"string"==typeof a.sso_account_id||"string"==typeof a.sso_session||"string"==typeof a.sso_region||"string"==typeof a.sso_role_name))(g))return await m(a,g,c);throw new f.C(`Could not resolve credentials using profile: [${a}] in configuration/credentials file(s).`,{logger:c.logger})},r=(a={})=>async({callerClientConfig:b}={})=>{let c={...a,parentClientConfig:{...b,...a.parentClientConfig}};c.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let f=await (0,d.Y)(c);return q((0,e.Bz)({profile:a.profile??b?.profile}),f,c)}}};